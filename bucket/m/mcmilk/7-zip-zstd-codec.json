{
    "version": "25.01-1.5.7-r4",
    "description": "A plugin for 7-Zip installations that adds support for modern compression codecs, including Zstandard, Brotli, LZ4, LZ5, Lizard, and Fast-LZMA2.",
    "homepage": "https://github.com/mcmilk/7-Zip-zstd",
    "license": {
        "identifier": "BSD-2-Clause, BSD-3-Clause, LGPL-2.1-or-later",
        "url": "https://github.com/mcmilk/7-Zip-zstd/blob/HEAD/COPYING"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/mcmilk/7-Zip-zstd/releases/download/v25.01-v1.5.7-R4/Codecs-x64.7z",
            "hash": "35d1cda34f51f52a2e9a6736f7568bc60ec73c04d6c01f8d566f5cc05b229f31"
        },
        "32bit": {
            "url": "https://github.com/mcmilk/7-Zip-zstd/releases/download/v25.01-v1.5.7-R4/Codecs-x32.7z",
            "hash": "bdc8d90f366267896d09bfb15e81ec461c6eb62943d4d680b9b43acda6b2f387"
        },
        "arm64": {
            "url": "https://github.com/mcmilk/7-Zip-zstd/releases/download/v25.01-v1.5.7-R4/Codecs-arm64.7z",
            "hash": "ac61f20c5edd883f90485456bbdb4a32855fff30572e3b27c675ab10189c3b08"
        }
    },
    "installer": {
        "script": [
            "$7z_path = Get-CommandPath -Command '7z.exe'",
            "if ([string]::IsNullOrWhiteSpace($7z_path)) {",
            "    abort \"`nCould not locate '7z.exe' in system PATH. Abort installation.\"",
            "}",
            "$codecs_dir = Join-Path -Path $(Split-Path -Path $7z_path -Parent) -ChildPath 'Codecs'",
            "if (-not (Test-Path -Path $codecs_dir -PathType Container)) { ensure $codecs_dir | Out-Null }",
            "Copy-Item -Path \"$dir\\*\" -Destination $codecs_dir -Exclude '*.md', '*.json', 'LICENSE' -Force -Recurse"
        ]
    },
    "uninstaller": {
        "script": [
            "$7z_path = Get-CommandPath -Command '7z.exe'",
            "if (-not [string]::IsNullOrWhiteSpace($7z_path)) {",
            "    $codecs_dir = Join-Path -Path $(Split-Path -Path $7z_path -Parent) -ChildPath 'Codecs'",
            "    Get-ChildItem -Path $dir -Exclude '*.md', '*.json', 'LICENSE' | ForEach-Object -Process {",
            "        Remove-Item -Path \"$codecs_dir\\$($_.Name)\" -Recurse -Force -ErrorAction SilentlyContinue",
            "    }",
            "}"
        ]
    },
    "checkver": {
        "url": "https://api.github.com/repositories/61958135/releases/latest",
        "jsonpath": "$.assets[?(@.name =~ /Codecs(?!.+ndm)/i)].browser_download_url",
        "regex": "(?i)download/(?<tag>v?(?<sevenzip>[^-]+)-v?(?<zstd>[^-]+)-R(?<release>\\d+))/Codecs-(?:arm|x)",
        "replace": "${sevenzip}-${zstd}-r${release}"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/mcmilk/7-Zip-zstd/releases/download/$matchTag/Codecs-x64.7z"
            },
            "32bit": {
                "url": "https://github.com/mcmilk/7-Zip-zstd/releases/download/$matchTag/Codecs-x32.7z"
            },
            "arm64": {
                "url": "https://github.com/mcmilk/7-Zip-zstd/releases/download/$matchTag/Codecs-arm64.7z"
            }
        }
    }
}

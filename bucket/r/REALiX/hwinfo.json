{
    "version": "8.40-5900",
    "description": "Comprehensive Hardware Analysis, Monitoring and Reporting for Windows and DOS.",
    "homepage": "https://www.hwinfo.com",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.hwinfo.com/licenses/"
    },
    "url": "https://www.sac.sk/download/utildiag/hwi_840.zip",
    "hash": "c06212d303dfe49f454620321e0ae54eea2557b78a2515aa940a51d67365863c",
    "architecture": {
        "64bit": {
            "pre_install": "Get-ChildItem -Path $dir -Include '*32*', '*ARM*' -Recurse -File | Remove-Item -Force -ErrorAction SilentlyContinue"
        },
        "32bit": {
            "pre_install": "Get-ChildItem -Path $dir -Include '*64*' -Recurse -File | Remove-Item -Force -ErrorAction SilentlyContinue"
        },
        "arm64": {
            "pre_install": "Get-ChildItem -Path $dir -Exclude '*ARM*' -Recurse -File | Remove-Item -Force -ErrorAction SilentlyContinue"
        }
    },
    "installer": {
        "script": [
            "ensure $persist_dir | Out-Null",
            "$base_name = Get-ChildItem -Path $dir -Filter '*.exe' -File | Select-Object -ExpandProperty BaseName -First 1",
            "if (-not (Test-Path -Path \"$persist_dir\\$base_name.INI\" -PathType Leaf)) {",
            "    $cfg = @('[Settings]', 'AutoUpdate=0', 'AutoUpdateBetaDisable=1')",
            "    Set-Content -Path \"$dir\\$base_name.INI\" -Value $cfg -Encoding ascii",
            "}",
            "Get-ChildItem -Path $persist_dir -Filter '*64_KEY.txt' -File | Copy-Item -Destination $dir -Force"
        ]
    },
    "post_install": [
        "$base_name = Get-ChildItem -Path $dir -Filter '*.exe' -File | Select-Object -ExpandProperty BaseName -First 1",
        "$program_name, $setting_name = @('.exe', '.INI') | ForEach-Object -Process { $base_name + $_ }",
        "$binary_info = @($program_name, 'HWiNFO')",
        "$pkg_manifest = @{ bin = ,$binary_info; shortcuts = ,$binary_info; persist = $setting_name }",
        "create_shims $pkg_manifest $dir $global $architecture",
        "create_startmenu_shortcuts $pkg_manifest $dir $global $architecture",
        "persist_data $pkg_manifest $original_dir $persist_dir",
        "persist_permission $pkg_manifest $global"
    ],
    "pre_uninstall": "Get-ChildItem -Path $dir -Filter '*64_KEY.txt' -File | Copy-Item -Destination $persist_dir -Force",
    "uninstaller": {
        "script": [
            "$base_name = Get-ChildItem -Path $dir -Filter '*.exe' -File | Select-Object -ExpandProperty BaseName -First 1",
            "$program_name, $setting_name = @('.exe', '.INI') | ForEach-Object -Process { $base_name + $_ }",
            "$binary_info = @($program_name, 'HWiNFO')",
            "$pkg_manifest = @{ bin = ,$binary_info; shortcuts = ,$binary_info; persist = $setting_name }",
            "rm_shims $app $pkg_manifest $global $architecture",
            "rm_startmenu_shortcuts $pkg_manifest $global $architecture",
            "unlink_persist_data $pkg_manifest $dir"
        ]
    },
    "checkver": {
        "url": "https://www.hwinfo.com/ver.txt",
        "regex": "([\\d.-]+)"
    },
    "autoupdate": {
        "url": "https://www.sac.sk/download/utildiag/hwi_$majorVersion$minorVersion.zip"
    }
}

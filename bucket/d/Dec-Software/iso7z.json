{
    "version": "1.8.7",
    "description": "A plugin for 7-Zip that enables direct extraction of a wide range of disc image formats without mounting and provides specialized support for efficient compression of raw disc images.",
    "homepage": "https://www.tc4shell.com/en/7zip/iso7z/",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.tc4shell.com/en/termsofuse/"
    },
    "notes": [
        "When compressing disc images that include index files, package the image files together with their corresponding index files.",
        "- This applies to formats such as CCD/IMG, CUE/BIN, GDI, and MDS/MDF.",
        "- Including index files is necessary for RawSplitter to perform correct analysis.",
        "",
        "If a disc contains only tracks with 2048-byte sectors, compression gains from RawSplitter will be negligible.",
        "- Such tracks do not contain additional housekeeping data.",
        "- In these cases, it is advisable to use another compression method, such as LZMA2."
    ],
    "url": "https://www.tc4shell.com/binary/Iso7z.zip",
    "hash": "4b41b567025cf884198d7f810994d37e4024b6d538871b1f93283bb1a67ccafd",
    "architecture": {
        "64bit": {
            "pre_install": [
                "Get-ChildItem -Path $dir -Include '*32*' -Recurse -File | Remove-Item -Force -ErrorAction SilentlyContinue",
                "Get-ChildItem -Path $dir -Include '*64*' -Recurse -File | Rename-Item -NewName { $_.Name -replace '\\.\\d{2}(?=\\.dll)', '' } -Force"
            ]
        },
        "32bit": {
            "pre_install": [
                "Get-ChildItem -Path $dir -Include '*64*' -Recurse -File | Remove-Item -Force -ErrorAction SilentlyContinue",
                "Get-ChildItem -Path $dir -Include '*32*' -Recurse -File | Rename-Item -NewName { $_.Name -replace '\\.\\d{2}(?=\\.dll)', '' } -Force"
            ]
        }
    },
    "installer": {
        "script": [
            "$7z_path = Get-CommandPath -Command '7z.exe'",
            "if ([string]::IsNullOrWhiteSpace($7z_path)) {",
            "    abort \"`n[ERROR]  Could not locate '7z.exe' in system PATH. Installation terminated.\"",
            "}",
            "$formats_dir = Join-Path -Path $(Split-Path -Path $7z_path -Parent) -ChildPath 'Formats'",
            "if (-not (Test-Path -Path $formats_dir -PathType Container)) {",
            "    New-Item -Path $formats_dir -ItemType Directory -Force | Out-Null",
            "}",
            "Copy-Item -Path \"$dir\\*\" -Destination $formats_dir -Exclude '*.json', 'ReadMe.txt' -Force -Recurse"
        ]
    },
    "uninstaller": {
        "script": [
            "$7z_path = Get-CommandPath -Command '7z.exe'",
            "if (-not [string]::IsNullOrWhiteSpace($7z_path)) {",
            "    $formats_dir = Join-Path -Path $(Split-Path -Path $7z_path -Parent) -ChildPath 'Formats'",
            "    Get-ChildItem -Path $dir -Exclude '*.json', 'ReadMe.txt' | ForEach-Object -Process {",
            "        Remove-Item -Path \"$formats_dir\\$($_.Name)\" -Recurse -Force -ErrorAction SilentlyContinue",
            "    }",
            "}"
        ]
    },
    "checkver": "Plugin version:\\s*([\\d.]+)",
    "autoupdate": {
        "url": "https://www.tc4shell.com/binary/Iso7z.zip"
    }
}

{
    "version": "260114",
    "description": "A versatile multimedia player offering robust playback capabilities with broad support for numerous video codecs and formats.",
    "homepage": "https://potplayer.tv",
    "license": {
        "identifier": "Freeware",
        "url": "https://potplayer.tv/publicRelation"
    },
    "architecture": {
        "64bit": {
            "url": "https://t1.daumcdn.net/potplayer/PotPlayer/Version/260114/PotPlayerSetup64.exe",
            "hash": "844ab37b663b04699bb23435ca7a73e358ef37dba01321c92aeaef8377a08854",
            "shortcuts": [
                [
                    "PotPlayer64.exe",
                    "PotPlayer"
                ],
                [
                    "PotPlayerMini64.exe",
                    "PotPlayer Mini"
                ]
            ]
        },
        "32bit": {
            "url": "https://t1.daumcdn.net/potplayer/PotPlayer/Version/260114/PotPlayerSetup.exe",
            "hash": "33c664e9379f2bdfcd60f8c7035cf4d64737eb05e6ea8420151b66ec5c76d6ee",
            "shortcuts": [
                [
                    "PotPlayer.exe",
                    "PotPlayer"
                ],
                [
                    "PotPlayerMini.exe",
                    "PotPlayer Mini"
                ]
            ]
        }
    },
    "pre_install": [
        "$arch_flag = if ($architecture -eq '64bit') { '64' } else { '' }",
        "$cfg = @('[Settings]', 'AutoUpdateStart=0', 'CheckAutoUpdate=0', 'AutoDownloadFile=0')",
        "'PotPlayer', 'PotPlayerMini' | ForEach-Object -Process {",
        "    $setting_name = \"$_{0}.ini\" -f $arch_flag",
        "    if (-not (Test-Path -Path \"$persist_dir\\$setting_name\" -PathType Leaf)) {",
        "        Set-Content -Path \"$dir\\$setting_name\" -Value $cfg -Encoding unicode",
        "    }",
        "    persist_data @{ persist = $setting_name } $original_dir $persist_dir",
        "}"
    ],
    "installer": {
        "script": "Expand-7zipArchive -Path \"$dir\\$fname\" -Switches '-xr!$* -xr!*XP* -xr!unins*' -Removal"
    },
    "post_install": [
        "'Logos', 'Skins', 'Module', 'UrlList', 'IconPack', 'PxShader', 'Extension' | ForEach-Object -Process {",
        "    $original_data_dir = \"$dir\\$_.original\"",
        "    if (Test-Path -Path $original_data_dir -PathType Container) {",
        "        Copy-Item -Path \"$original_data_dir\\*\" -Destination \"$dir\\$_\" -Force -Recurse",
        "        Remove-Item -Path $original_data_dir -Recurse -Force -ErrorAction SilentlyContinue",
        "    }",
        "}"
    ],
    "persist": [
        "Logos",
        "Model",
        "Skins",
        "Engine",
        "Module",
        "Capture",
        "Playlist",
        "UrlList",
        "IconPack",
        "PxShader",
        "Extension",
        "Extention"
    ],
    "pre_uninstall": [
        "$arch_flag = if ($architecture -eq '64bit') { '64' } else { '' }",
        "'PotPlayer', 'PotPlayerMini' | ForEach-Object -Process {",
        "    $setting_name = \"$_{0}.ini\" -f $arch_flag",
        "    unlink_persist_data @{ persist = $setting_name } $dir",
        "}"
    ],
    "checkver": {
        "url": "https://t1.daumcdn.net/potplayer/PotPlayer/v4/Update2/UpdateEng.html",
        "regex": "\\[(\\d+)\\]"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://t1.daumcdn.net/potplayer/PotPlayer/Version/$version/PotPlayerSetup64.exe"
            },
            "32bit": {
                "url": "https://t1.daumcdn.net/potplayer/PotPlayer/Version/$version/PotPlayerSetup.exe"
            }
        }
    }
}

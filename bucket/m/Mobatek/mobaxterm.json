{
    "version": "25.4",
    "description": "An enhanced terminal for Windows with X11 server, tabbed SSH client, network tools and much more.",
    "homepage": "https://mobaxterm.mobatek.net",
    "license": {
        "identifier": "Freeware",
        "url": "https://mobaxterm.mobatek.net/license.html"
    },
    "url": "https://download.mobatek.net/2542025111600034/MobaXterm_Portable_v25.4.zip#/dl.7z_",
    "hash": "d4c4bea83c5a17b574c3f067fe4b02fe33f57f30d50f01f26a23cb8b7212f822",
    "pre_install": [
        "# Hard links are not applicable here because the application creates a new file instead of modifying the existing one in place.",
        "if ($cmd -eq 'install' -and -not (Test-Path -Path \"$persist_dir\\*\")) { return }",
        "'*.mxt3', '*.mxtpro', 'MobaXterm.ini', 'MobaXterm backup.zip' | ForEach-Object -Process {",
        "    if (Test-Path -Path \"$persist_dir\\$_\" -PathType Leaf) {",
        "        Copy-Item -Path \"$persist_dir\\$_\" -Destination $dir -Force",
        "    }",
        "}"
    ],
    "installer": {
        "script": [
            "Expand-7zipArchive -Path \"$dir\\$fname\" -Removal",
            "if (-not (Test-Path -Path \"$dir\\MobaXterm.ini\" -PathType Leaf)) {",
            "    $cfg = @('[Misc]', 'HomeDir=_MobaFolder_\\home', 'SlashDir=_MobaFolder_\\slash')",
            "    Set-Content -Path \"$dir\\MobaXterm.ini\" -Value $cfg -Encoding ascii",
            "}",
            "Get-ChildItem -Path $dir -Filter 'MobaXterm*.exe' -File | Rename-Item -NewName { $_.Name -replace '_.+(?=\\.exe)', '' }"
        ]
    },
    "bin": "MobaXterm.exe",
    "shortcuts": [
        [
            "MobaXterm.exe",
            "MobaXterm"
        ]
    ],
    "persist": [
        "home",
        "slash"
    ],
    "pre_uninstall": [
        "# Hard links are not applicable here because the application creates a new file instead of modifying the existing one in place.",
        "if ($cmd -eq 'uninstall' -and $purge) { return }",
        "'*.mxt3', '*.mxtpro', 'MobaXterm.ini', 'MobaXterm backup.zip' | ForEach-Object -Process {",
        "    if (Test-Path -Path \"$dir\\$_\" -PathType Leaf) {",
        "        Copy-Item -Path \"$dir\\$_\" -Destination $persist_dir -Force",
        "    }",
        "}"
    ],
    "uninstaller": {
        "script": [
            "Stop-Process -Name 'XWin_MobaX' -Force -ErrorAction SilentlyContinue",
            "Start-Sleep -Milliseconds 1500"
        ]
    },
    "checkver": {
        "url": "https://mobaxterm.mobatek.net/download-home-edition.html",
        "regex": "mobatek.net/(?<build>[^/]+)/MobaXterm_Portable_v([\\d.]+)\\.zip"
    },
    "autoupdate": {
        "url": "https://download.mobatek.net/$matchBuild/MobaXterm_Portable_v$version.zip#/dl.7z_"
    }
}

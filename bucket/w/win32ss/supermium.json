{
    "version": "138.0.7204.300-r9",
    "description": "An up-to-date Chromium-based web browser compatible with Windows Vista, 7 and 8.x.",
    "homepage": "https://win32subsystem.live/supermium/",
    "license": {
        "identifier": "BSD-3-Clause",
        "url": "https://github.com/win32ss/supermium/blob/HEAD/LICENSE"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/win32ss/supermium/releases/download/v138-r9/supermium_138_64_setup_win10_11.exe",
            "hash": "3a2819d9de060e58665c26602275de22a98db6080db9a21c98b08f3163910900"
        },
        "32bit": {
            "url": "https://github.com/win32ss/supermium/releases/download/v138-r9/supermium_138_32_setup.exe",
            "hash": "7df7930bdede7c2bebeced9e9f1c2053d63f0186120abaf15614b98c75a26bff"
        }
    },
    "installer": {
        "script": [
            "ensure \"$persist_dir\\User Data\" | Out-Null",
            "$original_data_dir = \"$env:LocalAppData\\Supermium\\User Data\"",
            "$extract_params = @{ Path = \"$dir\\$fname\"; ExtractDir = 'Supermium' }",
            "Expand-7zipArchive @extract_params -Switches '-xr!$* -xr!unins*' -Removal",
            "if (-not (Test-Path -Path \"$persist_dir\\User Data\\*\") -and (Test-Path -Path \"$original_data_dir\\*\")) {",
            "    Write-Host \"`nINFO  Migrating user data to '$persist_dir\\User Data'...\" -ForegroundColor DarkGray",
            "    Copy-Item -Path \"$original_data_dir\\*\" -Destination \"$persist_dir\\User Data\" -Force -Recurse",
            "}",
            "Remove-Item -Path \"$env:LocalAppData\\Supermium\" -Recurse -Force -ErrorAction SilentlyContinue"
        ]
    },
    "bin": [
        [
            "chrome.exe",
            "supermium",
            "--user-data-dir=\"$dir\\User Data\""
        ]
    ],
    "shortcuts": [
        [
            "chrome.exe",
            "Supermium",
            "--user-data-dir=\"$dir\\User Data\""
        ]
    ],
    "persist": "User Data",
    "checkver": {
        "url": "https://api.github.com/repositories/638089306/releases/latest",
        "script": [
            "$release = $page | ConvertFrom-Json -ErrorAction Stop",
            "Write-Output \"$($release.tag_name), $($release.name)\""
        ],
        "regex": "(?i)(?<tag>v?[\\d]+(?<suffix>-[^,]+)?),.+?(?<prefix>[\\d.]+)",
        "replace": "${prefix}${suffix}"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/win32ss/supermium/releases/download/$matchTag/supermium_$majorVersion_64_setup_win10_11.exe"
            },
            "32bit": {
                "url": "https://github.com/win32ss/supermium/releases/download/$matchTag/supermium_$majorVersion_32_setup.exe"
            }
        },
        "hash": {
            "url": "https://github.com/win32ss/supermium/releases/tag/$matchTag",
            "regex": "(?s)$basename.+?$checksum"
        }
    }
}

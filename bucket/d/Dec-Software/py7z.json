{
    "version": "1.2.1",
    "description": "A plugin for 7-Zip that adds support for opening PyInstaller archives used to bundle Python applications into standalone executables.",
    "homepage": "https://www.tc4shell.com/en/7zip/py7z/",
    "license": {
        "identifier": "Freeware",
        "url": "https://www.tc4shell.com/en/termsofuse/"
    },
    "url": "https://www.tc4shell.com/binary/Py7z.zip",
    "hash": "46852cc664be105c62d619c7c9d9fe28e34cb1e85557b8f91a8322ca7e1ff29d",
    "architecture": {
        "64bit": {
            "pre_install": [
                "Get-ChildItem -Path $dir -Include '*32*' -Recurse -File | Remove-Item -Force -ErrorAction SilentlyContinue",
                "Get-ChildItem -Path $dir -Include '*64*' -Recurse -File | Rename-Item -NewName { $_.FullName -replace '\\d{2}\\.(?=dll)', '' }"
            ]
        },
        "32bit": {
            "pre_install": [
                "Get-ChildItem -Path $dir -Include '*64*' -Recurse -File | Remove-Item -Force -ErrorAction SilentlyContinue",
                "Get-ChildItem -Path $dir -Include '*32*' -Recurse -File | Rename-Item -NewName { $_.FullName -replace '\\d{2}\\.(?=dll)', '' }"
            ]
        }
    },
    "installer": {
        "script": [
            "$7z_path = friendly_path -Path $(Get-CommandPath -Command '7z.exe')",
            "if ($null -eq $7z_path) { abort \"`nCould not locate '7z.exe' in system PATH. Abort installation.\" }",
            "$formats_dir = Join-Path -Path $(Split-Path -Path $7z_path -Parent) -ChildPath 'Formats'",
            "if (-not (Test-Path -Path $formats_dir -PathType Container)) { ensure $formats_dir | Out-Null }",
            "Copy-Item -Path \"$dir\\*\" -Destination $formats_dir -Exclude '*.json', 'ReadMe.txt' -Force -Recurse"
        ]
    },
    "uninstaller": {
        "script": [
            "$7z_path = friendly_path -Path $(Get-CommandPath -Command '7z.exe')",
            "$formats_dir = Join-Path -Path $(Split-Path -Path $7z_path -Parent) -ChildPath 'Formats'",
            "Get-ChildItem -Path $dir -Exclude '*.json', 'ReadMe.txt' | ForEach-Object -Process {",
            "    Remove-Item -Path \"$formats_dir\\$($_.Name)\" -Force -Recurse -ErrorAction SilentlyContinue",
            "}"
        ]
    },
    "checkver": "Plugin version:\\s*([\\d.]+)",
    "autoupdate": {
        "url": "https://www.tc4shell.com/binary/Py7z.zip"
    }
}
